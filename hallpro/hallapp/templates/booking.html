<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hall Booking Form | Professional</title>

    {% load static %}

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --primary-color: #2563eb;
            --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        body {
            background: var(--bg-gradient);
            font-family: 'Poppins', sans-serif;
            padding: 40px 10px;
            min-height: 100vh;
        }

        .form-container {
            max-width: 950px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 20px;
        }

        .college-logo {
            max-height: 110px;
            margin-bottom: 15px;
            width: auto;
            display: block !important;
            visibility: visible !important;
        }

        #college-name {
            font-weight: 700;
            color: #1e293b;
            font-size: 1.25rem;
            margin-bottom: 10px;
        }

        .form-title {
            background: #eff6ff;
            color: var(--primary-color);
            padding: 5px 20px;
            border-radius: 8px;
            font-weight: 600;
            display: inline-block;
            border: 1px solid #dbeafe;
        }

        .section-header {
            font-weight: 600;
            color: #475569;
            margin: 25px 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header::after {
            content: "";
            flex: 1;
            height: 1px;
            background: #e2e8f0;
        }

        .modern-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            transition: all 0.2s;
            outline: none;
            background: #fff;
        }

        .modern-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 12px;
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .note-box {
            background: #fffbeb;
            border: 1px solid #fef3c7;
            border-left: 5px solid #f59e0b;
            padding: 20px;
            font-size: 14px;
            border-radius: 8px;
            margin: 30px 0;
            line-height: 1.7;
            color: #92400e;
            text-align: justify;
        }

        .sig-box {
            margin-top: 50px;
            padding-top: 20px;
        }

        #langSelector {
            background: rgba(255, 255, 255, 0.2) !important;
            border: 1px solid rgba(255, 255, 255, 0.5) !important;
            color: white !important;
            backdrop-filter: blur(10px);
        }

        #langSelector option {
            background: #1e3c72 !important;
            color: white !important;
        }

        @media print {
            body { background: white; padding: 0; }
            .form-container { box-shadow: none; border: none; width: 100%; padding: 0; }
            .no-print { display: none !important; }
            .modern-input { border-width: 0 0 1px 0; border-radius: 0; padding: 2px; }
            .checkbox-grid { background: transparent; border: 1px solid #eee; }
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%) !important; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'index' %}" style="color: white !important; font-weight: bold; font-size: 1.5rem;">üéì Sangamner College</a>
            <div class="ms-auto d-flex align-items-center gap-3">
                <select class="form-select w-auto" id="langSelector" onchange="switchLanguage()">
                    <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                    <option value="en">English</option>
                </select>

                {% if user.is_authenticated %}
                <div class="dropdown">
                    <button class="btn dropdown-toggle d-flex align-items-center" type="button" id="profileDropdown" data-bs-toggle="dropdown" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white;">
                        <i class="fas fa-user-circle me-2"></i>
                        <span>{{ user.get_full_name|default:user.username }}</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="{% url 'index' %}"><i class="fas fa-home me-2"></i>Home</a></li>
                        <li><a class="dropdown-item" href="{% url 'mybooking' %}"><i class="fas fa-calendar me-2"></i>My Bookings</a></li>
                        {% if user.user_type == 'admin' %}
                        <li><a class="dropdown-item" href="{% url 'admin-dashboard' %}"><i class="fas fa-cog me-2"></i>Admin Dashboard</a></li>
                        {% endif %}
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
                {% else %}
                <a class="btn btn-outline-light btn-sm" href="{% url 'landing' %}"><i class="fas fa-sign-in-alt me-2"></i>Login</a>
                {% endif %}

                <button class="btn btn-dark" onclick="window.print()" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3);">
                    <i class="fas fa-print me-2"></i>Print
                </button>
            </div>
        </div>
    </nav>

    <div class="form-container">
        <div class="header-wrapper">
            <img src="/static/images/sangamner.jpg" alt="College Logo" class="college-logo">
            <h5 id="college-name">‡§∏‡§Ç‡§ó‡§Æ‡§®‡•á‡§∞ ‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ ‡§ï‡§≤‡§æ, ‡§¶‡§æ.‡§ú.‡§Æ‡§æ‡§≤‡§™‡§æ‡§£‡•Ä ‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§¨.‡§®‡§æ.‡§∏‡§æ‡§∞‡§°‡§æ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§Æ‡§π‡§æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø, ‡§∏‡§Ç‡§ó‡§Æ‡§®‡•á‡§∞</h5>
            <div class="form-title" id="form-title">‡§∏‡§≠‡§æ‡§ó‡•É‡§π / ‡§π‡•â‡§≤ ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§Ö‡§∞‡•ç‡§ú (Hall Booking Form)</div>
        </div>

        <form id="bookingForm" method="POST" onsubmit="handleFormSubmit(event)">
            {% csrf_token %}

            <div class="row g-3">
                <div class="col-md-4">
                    <label class="fw-bold lbl-date">‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</label>
                    <input type="date" name="date" id="dateInput" class="modern-input" required onchange="updateDay()">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold lbl-day">‡§µ‡§æ‡§∞:</label>
                    <select name="day" id="daySelect" class="modern-input"></select>
                </div>
                <div class="col-md-4">
                    <label class="fw-bold lbl-time">‡§µ‡•á‡§≥:</label>
                    <div class="d-flex align-items-center gap-2">
                        <input type="time" name="time_from" id="time_from" class="modern-input" required>
                        <span class="lbl-to">‡§§‡•á</span>
                        <input type="time" name="time_to" id="time_to" class="modern-input" required>
                    </div>
                </div>

                <div class="col-12">
                    <label class="fw-bold lbl-event">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡•á ‡§®‡§æ‡§Ç‡§µ:</label>
                    <input type="text" name="event_name" class="modern-input" required>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-dept">‡§µ‡§ø‡§≠‡§æ‡§ó:</label>
                    <input type="text" name="department" class="modern-input">
                </div>
                <div class="col-md-6">
                    <label class="fw-bold lbl-mob">‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞:</label>
                    <input type="tel" name="mobile" class="modern-input">
                </div>

                <div class="col-12">
                    <label class="fw-bold lbl-coord">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ / ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§®‡§æ‡§Ç‡§µ :</label>
                    <input type="text" name="coordinator" class="modern-input">
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-venue">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡•ç‡§•‡§≥:</label>
                    <select name="venue" id="venueSelect" class="modern-input">
                        <option value="" disabled selected id="venuePlaceholder">-- ‡§∏‡•ç‡§•‡§≥ ‡§®‡§ø‡§µ‡§°‡§æ --</option>
                        {% for hall in halls %}
                        <option value="{{ hall.id }}">{{ hall.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-stage">‡§∏‡•ç‡§ü‡•á‡§ú ‡§Ü‡§ï‡§æ‡§∞:</label>
                    <select name="stage_size" id="stageSelect" class="modern-input"></select>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-audience">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§∏ ‡§™‡•ç‡§∞‡•á‡§ï‡•ç‡§∑‡§ï ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ:</label>
                    <input type="number" name="audience_count" class="modern-input">
                </div>
                <div class="col-md-6">
                    <label class="fw-bold lbl-chairs">‡§∏‡•ç‡§ü‡•á‡§ú ‡§ñ‡•Å‡§∞‡•ç‡§ö‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ -</label>
                    <div class="input-group">
                        <select name="chair_type" id="chairType" class="modern-input" style="width: 50%;">
                            <option value="Wheel" id="optWheel">‡§µ‡•ç‡§π‡•Ä‡§≤ (Wheel)</option>
                            <option value="Fiber" id="optFiber">‡§´‡§æ‡§Ø‡§¨‡§∞ (Fiber)</option>
                        </select>
                        <input type="number" name="chairs_count" id="chairCount" class="modern-input" style="width: 50%;" placeholder="‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ">
                    </div>
                </div>
            </div>

            <div class="section-header lbl-req">‡§∏‡§æ‡§π‡§ø‡§§‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ</div>

            <div class="row g-3">
                <div class="col-md-3">
                    <label class="fw-bold lbl-mic">‡§Æ‡§æ‡§à‡§ï:</label>
                    <input type="number" name="mic_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-ls">‡§≤‡§æ‡§â‡§° ‡§∏‡•ç‡§™‡•Ä‡§ï‡§∞:</label>
                    <input type="number" name="speaker_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-proj">LCD ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü‡§∞:</label>
                    <input type="number" name="projector_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-lap">‡§≤‡•Ö‡§™‡§ü‡•â‡§™:</label>
                    <input type="number" name="laptop_count" class="modern-input" value="0">
                </div>
            </div>

            <div class="checkbox-grid mt-3">
                <div class="form-check"><input type="checkbox" name="agarbatti" class="form-check-input"> <span class="lbl-agar">‡§Ö‡§ó‡§∞‡§¨‡§§‡•ç‡§§‡•Ä</span></div>
                <div class="form-check"><input type="checkbox" name="matchbox" class="form-check-input"> <span class="lbl-match">‡§ï‡§æ‡§°‡•Ä‡§™‡•á‡§ü‡•Ä</span></div>
                <div class="form-check"><input type="checkbox" name="oil" class="form-check-input"> <span class="lbl-oil">‡§§‡•á‡§≤</span></div>
                <div class="form-check"><input type="checkbox" name="wati" class="form-check-input"> <span class="lbl-wati">‡§µ‡§æ‡§§‡•Ä</span></div>
                <div class="form-check"><input type="checkbox" name="kapur" class="form-check-input"> <span class="lbl-kapur">‡§ï‡§æ‡§™‡•Ç‡§∞‡§µ‡§°‡•Ä</span></div>
                <div class="form-check"><input type="checkbox" name="satarangi" class="form-check-input"> <span class="lbl-satarangi">‡§∏‡§§‡§∞‡§Ç‡§ú‡•Ä</span></div>
                <div class="form-check"><input type="checkbox" name="carpet" class="form-check-input"> <span class="lbl-carpet">‡§∞‡•á‡§° ‡§ï‡§æ‡§∞‡§™‡•á‡§ü</span></div>
                <div class="form-check"><input type="checkbox" name="mandap" class="form-check-input"> <span class="lbl-mandap">‡§Æ‡§Ç‡§°‡§™</span></div>
                <div class="form-check"><input type="checkbox" name="saraswati" class="form-check-input"> <span class="lbl-saraswati">‡§∏‡§∞‡§∏‡•ç‡§µ‡§§‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ</span></div>
                <div class="form-check"><input type="checkbox" name="samai" class="form-check-input"> <span class="lbl-samai">‡§∏‡§Æ‡§æ‡§à</span></div>
            </div>

            <div class="note-box" id="note-text"></div>

            

            <div class="text-center mt-4 no-print">
                <button type="submit" class="btn btn-primary btn-lg px-5 shadow">Submit Application</button>
            </div>
        </form>
    </div>

    <script>
        const translations = {
            mr: {
                college: "‡§∏‡§Ç‡§ó‡§Æ‡§®‡•á‡§∞ ‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ ‡§ï‡§≤‡§æ, ‡§¶‡§æ.‡§ú.‡§Æ‡§æ‡§≤‡§™‡§æ‡§£‡•Ä ‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§¨.‡§®‡§æ.‡§∏‡§æ‡§∞‡§°‡§æ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§Æ‡§π‡§æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø, ‡§∏‡§Ç‡§ó‡§Æ‡§®‡•á‡§∞",
                title: "‡§∏‡§≠‡§æ‡§ó‡•É‡§π / ‡§π‡•â‡§≤ ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§Ö‡§∞‡•ç‡§ú (Hall Booking Form)",
                date: "‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:", day: "‡§µ‡§æ‡§∞:", time: "‡§µ‡•á‡§≥:", to: "‡§§‡•á",
                event: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡•á ‡§®‡§æ‡§Ç‡§µ:", dept: "‡§µ‡§ø‡§≠‡§æ‡§ó:", mob: "‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞:",
                coord: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ / ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§®‡§æ‡§Ç‡§µ :", venue: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡•ç‡§•‡§≥:",
                venuePlaceholder: "-- ‡§∏‡•ç‡§•‡§≥ ‡§®‡§ø‡§µ‡§°‡§æ --",
                stage: "‡§∏‡•ç‡§ü‡•á‡§ú ‡§Ü‡§ï‡§æ‡§∞:", chairs: "‡§∏‡•ç‡§ü‡•á‡§ú ‡§ñ‡•Å‡§∞‡•ç‡§ö‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ -", audience: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§∏ ‡§™‡•ç‡§∞‡•á‡§ï‡•ç‡§∑‡§ï ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ:",
                chair_placeholder: "‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ",
                days: ["‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞", "‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞", "‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞", "‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞", "‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞", "‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞", "‡§∂‡§®‡§ø‡§µ‡§æ‡§∞"],
                stages: ["-- ‡§Ü‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ --", "‡§Æ‡•ã‡§†‡§æ", "‡§õ‡•ã‡§ü‡§æ"],
                opt_wheel: "‡§µ‡•ç‡§π‡•Ä‡§≤", opt_fiber: "‡§´‡§æ‡§Ø‡§¨‡§∞",
                req: "‡§∏‡§æ‡§π‡§ø‡§§‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ", mic: "‡§Æ‡§æ‡§à‡§ï:", ls: "‡§≤‡§æ‡§â‡§° ‡§∏‡•ç‡§™‡•Ä‡§ï‡§∞:", proj: "LCD ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü‡§∞:", lap: "‡§≤‡•Ö‡§™‡§ü‡•â‡§™:",
                
                success_title: "‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä!", success_msg: "‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§¶‡§∞ ‡§ï‡•á‡§≤‡§æ ‡§ó‡•á‡§≤‡§æ ‡§Ü‡§π‡•á.",
                note: "<strong>‡§∏‡•Ç‡§ö‡§®‡§æ -</strong> ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ö‡§∏‡§£‡§æ‡§±‡•ç‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ ‡§¨‡§æ‡§¨‡•Ä‡§Ç‡§ö‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§§‡§§‡§æ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§Ø‡§æ‡§Ç‡§®‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§è‡§ï ‡§¶‡§ø‡§µ‡§∏ ‡§Ö‡§ó‡•ã‡§¶‡§∞ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§¶‡•ç‡§Ø‡§æ‡§µ‡•ç‡§Ø‡§æ‡§§. ‡§∏‡•Å‡§ü‡•ç‡§ü‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§¶‡§ø‡§µ‡§∂‡•Ä ‡§∏‡§≠‡§æ‡§ó‡•É‡§π ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§ú‡§¨‡§æ‡§¨‡§¶‡§æ‡§∞‡•Ä ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§µ‡§ø‡§≠‡§æ‡§ó‡§æ‡§ö‡•Ä ‡§∞‡§æ‡§π‡•Ä‡§≤. ‡§™‡•ç‡§∞‡§•‡§Æ ‡§Ü‡§≤‡•á‡§≤‡•ç‡§Ø‡§æ ‡§Ö‡§∞‡•ç‡§ú‡§æ‡§∏ ‡§™‡•ç‡§∞‡§æ‡§ß‡§æ‡§®‡•ç‡§Ø ‡§¶‡§ø‡§≤‡•á ‡§ú‡§æ‡§à‡§≤. ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§∏‡§æ‡§†‡•Ä ‡§≤‡§æ‡§ó‡§£‡§æ‡§±‡•ç‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ ‡§¨‡§æ‡§¨‡•Ä‡§Ç‡§ö‡•á ‡§®‡§ø‡§Ø‡•ã‡§ú‡§® ‡§µ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§® ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§∏‡•ç‡§µ‡•Ä ‡§ú‡§¨‡§æ‡§¨‡§¶‡§æ‡§∞‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ‡§æ‡§ö‡•Ä ‡§∞‡§æ‡§π‡•Ä‡§≤. <strong>‡§∏‡§≠‡§æ‡§ó‡•É‡§π‡§æ‡§§‡•Ä‡§≤ ‡§∏‡§æ‡§π‡§ø‡§§‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§®‡•Å‡§ï‡§∏‡§æ‡§®‡•Ä‡§∏ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§ú‡§¨‡§æ‡§¨‡§¶‡§æ‡§∞ ‡§∞‡§æ‡§π‡§§‡•Ä‡§≤.</strong>",
                agar: "‡§Ö‡§ó‡§∞‡§¨‡§§‡•ç‡§§‡•Ä", match: "‡§ï‡§æ‡§°‡•Ä‡§™‡•á‡§ü‡•Ä", oil: "‡§§‡•á‡§≤", wati: "‡§µ‡§æ‡§§‡•Ä", kapur: "‡§ï‡§æ‡§™‡•Ç‡§∞‡§µ‡§°‡•Ä",
                satarangi: "‡§∏‡§§‡§∞‡§Ç‡§ú‡•Ä", carpet: "‡§∞‡•á‡§° ‡§ï‡§æ‡§∞‡§™‡•á‡§ü", mandap: "‡§Æ‡§Ç‡§°‡§™", saraswati: "‡§∏‡§∞‡§∏‡•ç‡§µ‡§§‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ", samai: "‡§∏‡§Æ‡§æ‡§à",
                venueNames: {
                    "Main Auditorium": "‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡§≠‡§æ‡§ó‡•É‡§π",
                    "Sai Baba Hall": "‡§∏‡§æ‡§à ‡§¨‡§æ‡§¨‡§æ ‡§π‡•â‡§≤",
                    "New Seminar Hall": "‡§®‡•ç‡§Ø‡•Å ‡§∏‡•á‡§Æ‡§ø‡§®‡§æ‡§∞ ‡§π‡•â‡§≤",
                    "Bafna Hall": "‡§¨‡§æ‡§´‡§®‡§æ ‡§π‡•â‡§≤"
                }
            },
            en: {
                college: "Sangamner Municipal Arts, D.J. Malpani Commerce and B.N. Sarda Science College, Sangamner",
                title: "Hall Booking Form",
                date: "Date:", day: "Day:", time: "Time:", to: "To",
                event: "Event Name:", dept: "Department:", mob: "Mobile No:",
                coord: "Program Head / Coordinator Name:", venue: "Venue Required:",
                venuePlaceholder: "-- Select Venue --",
                stage: "Stage Size:", chairs: "Stage Chairs Count -", audience: "Estimated Participants:",
                chair_placeholder: "Count",
                days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                stages: ["-- Select Size --", "Large", "Small"],
                opt_wheel: "Wheel", opt_fiber: "Fiber",
                req: "Materials & Facilities", mic: "Mic:", ls: "Loud Speaker:", proj: "LCD Projector:", lap: "Laptop:",
                
                success_title: "Submitted!", success_msg: "Your application has been submitted successfully.",
                note: "<strong>Note -</strong> To fulfill requirements, the coordinator should give prior notice one day before. On holidays, the responsibility of making the hall available lies with the concerned department. Priority to first come first serve. The complete responsibility of management shall lie with the Program Head. <strong>The coordinator will be responsible for damages.</strong>",
                agar: "Incense Sticks", match: "Matchbox", oil: "Oil", wati: "Cotton Wicks", kapur: "Camphor",
                satarangi: "Satarangi/Mat", carpet: "Red Carpet", mandap: "Mandap", saraswati: "Saraswati Photo", samai: "Traditional Lamp",
                venueNames: {
                    "Main Auditorium": "Main Auditorium",
                    "Sai Baba Hall": "Sai Baba Hall",
                    "New Seminar Hall": "New Seminar Hall",
                    "Bafna Hall": "Bafna Hall"
                }
            }
        };

        const engDayList = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

        function updateDay() {
            const dateVal = document.getElementById('dateInput').value;
            if (dateVal) {
                const date = new Date(dateVal);
                document.getElementById('daySelect').selectedIndex = date.getDay();
            }
        }

        function switchLanguage() {
            const lang = document.getElementById('langSelector').value;
            const t = translations[lang];

            document.getElementById('college-name').innerText = t.college;
            document.getElementById('form-title').innerText = t.title;
            document.getElementById('note-text').innerHTML = t.note;

            const labelMap = {
                '.lbl-date': t.date, '.lbl-day': t.day, '.lbl-time': t.time, '.lbl-to': t.to,
                '.lbl-event': t.event, '.lbl-dept': t.dept, '.lbl-mob': t.mob, '.lbl-coord': t.coord,
                '.lbl-venue': t.venue, '.lbl-stage': t.stage, '.lbl-chairs': t.chairs,
                '.lbl-audience': t.audience, '.lbl-req': t.req, '.lbl-sig2': t.sig2, '.lbl-sig3': t.sig3,
                '.lbl-mic': t.mic, '.lbl-ls': t.ls, '.lbl-proj': t.proj, '.lbl-lap': t.lap,
                '.lbl-agar': t.agar, '.lbl-match': t.match, '.lbl-oil': t.oil, '.lbl-wati': t.wati,
                '.lbl-kapur': t.kapur, '.lbl-satarangi': t.satarangi, '.lbl-carpet': t.carpet,
                '.lbl-mandap': t.mandap, '.lbl-saraswati': t.saraswati, '.lbl-samai': t.samai
            };
            Object.keys(labelMap).forEach(selector => {
                const el = document.querySelector(selector);
                if (el) el.innerText = labelMap[selector];
            });

            document.getElementById('chairCount').placeholder = t.chair_placeholder;
            document.getElementById('optWheel').innerText = t.opt_wheel;
            document.getElementById('optFiber').innerText = t.opt_fiber;
            document.getElementById('venuePlaceholder').innerText = t.venuePlaceholder;

            // Day Select
            const daySelect = document.getElementById('daySelect');
            const dIdx = daySelect.selectedIndex !== -1 ? daySelect.selectedIndex : 0;
            daySelect.innerHTML = "";
            t.days.forEach((d, i) => {
                daySelect.add(new Option(d, engDayList[i]));
            });
            daySelect.selectedIndex = dIdx;

            // Venue Select Translation Logic
            const venueSelect = document.getElementById('venueSelect');
            Array.from(venueSelect.options).forEach(option => {
                if (option.id === 'venuePlaceholder') return;
                
                // Keep the original English name in a data attribute
                if (!option.getAttribute('data-orig')) {
                    option.setAttribute('data-orig', option.text.trim());
                }
                
                const origName = option.getAttribute('data-orig');
                if (t.venueNames[origName]) {
                    option.text = t.venueNames[origName];
                }
            });

            // Stage Select
            const stageSelect = document.getElementById('stageSelect');
            const sIdx = stageSelect.selectedIndex !== -1 ? stageSelect.selectedIndex : 0;
            stageSelect.innerHTML = "";
            t.stages.forEach((s, i) => {
                const opt = new Option(s, i === 0 ? "" : s);
                if (i === 0) opt.disabled = true;
                stageSelect.add(opt);
            });
            stageSelect.selectedIndex = sIdx;
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            const lang = document.getElementById('langSelector').value;
            const t = translations[lang];

            const from = document.getElementById('time_from').value;
            const to = document.getElementById('time_to').value;
            if (to <= from) {
                Swal.fire({
                    icon: 'error',
                    title: lang === 'mr' ? '‡§ö‡•Ç‡§ï!' : 'Error',
                    text: lang === 'mr' ? '‡§µ‡•á‡§≥ ‡§¨‡§∞‡•ã‡§¨‡§∞ ‡§§‡§™‡§æ‡§∏‡§æ!' : 'End time must be after start time!'
                });
                return false;
            }

            const formData = new FormData(document.getElementById('bookingForm'));

            fetch('{% url "booking" %}', {
                method: 'POST',
                body: formData,
                headers: { 'X-CSRFToken': formData.get('csrfmiddlewaretoken') }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        title: t.success_title,
                        text: data.message || t.success_msg,
                        icon: 'success',
                        confirmButtonColor: '#2563eb'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = '{% url "mybooking" %}';
                        }
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: lang === 'mr' ? '‡§ö‡•Ç‡§ï!' : 'Error',
                        text: data.message || (lang === 'mr' ? '‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä ‡§ù‡§æ‡§≤‡•Ä!' : 'An error occurred!')
                    });
                }
            })
            .catch(error => {
                Swal.fire({ icon: 'error', title: 'Error', text: 'Network error occurred!' });
            });
        }

        window.onload = function() {
            switchLanguage();
            autoFillFromURL();
        };

        function autoFillFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const hallName = urlParams.get('hall');
            const selectedDate = urlParams.get('date');
            
            // Auto-fill date if provided
            if (selectedDate) {
                document.getElementById('dateInput').value = selectedDate;
                updateDay();
            }
            
            // Auto-select hall if provided
            if (hallName) {
                const venueSelect = document.getElementById('venueSelect');
                // Find the option with matching data-orig attribute (original English name)
                for (let i = 0; i < venueSelect.options.length; i++) {
                    const option = venueSelect.options[i];
                    const origName = option.getAttribute('data-orig');
                    if (origName && origName.trim() === hallName.trim()) {
                        venueSelect.selectedIndex = i;
                        break;
                    }
                    // Also check if the current text matches (for English language)
                    if (option.text.trim() === hallName.trim()) {
                        venueSelect.selectedIndex = i;
                        break;
                    }
                }
            }
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>