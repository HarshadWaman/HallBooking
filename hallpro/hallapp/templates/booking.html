<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hall Booking Form | Professional</title>
    
    {% load static %}
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        body { 
            background: var(--bg-gradient); 
            font-family: 'Poppins', sans-serif; 
            padding: 40px 10px;
            min-height: 100vh;
        }

        .form-container { 
            max-width: 950px; 
            margin: 0 auto; 
            background: white; 
            padding: 40px; 
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .header-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 20px;
        }
        
        .college-logo { 
            max-height: 110px; 
            margin-bottom: 15px;
            width: auto;
        }
        
        #college-name { 
            font-weight: 700; 
            color: #1e293b;
            font-size: 1.25rem;
            margin-bottom: 10px;
        }

        .form-title { 
            background: #eff6ff;
            color: var(--primary-color);
            padding: 5px 20px;
            border-radius: 8px;
            font-weight: 600;
            display: inline-block;
            border: 1px solid #dbeafe;
        }

        .section-header {
            font-weight: 600;
            color: #475569;
            margin: 25px 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section-header::after { content: ""; flex: 1; height: 1px; background: #e2e8f0; }

        .modern-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            transition: all 0.2s;
            outline: none;
            background: #fff;
        }
        .modern-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .checkbox-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); 
            gap: 12px; 
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .note-box { 
            background: #fffbeb;
            border: 1px solid #fef3c7;
            border-left: 5px solid #f59e0b;
            padding: 20px; 
            font-size: 14px; 
            border-radius: 8px;
            margin: 30px 0;
            line-height: 1.7;
            color: #92400e;
            text-align: justify;
        }

        .sig-box {
            margin-top: 50px;
            padding-top: 20px;
        }

        @media print { 
            body { background: white; padding: 0; }
            .form-container { box-shadow: none; border: none; width: 100%; padding: 0; }
            .no-print { display: none !important; }
            .modern-input { border-width: 0 0 1px 0; border-radius: 0; padding: 2px; }
            .checkbox-grid { background: transparent; border: 1px solid #eee; }
        }
    </style>
</head>
<body>

    <div class="container mb-3 no-print d-flex justify-content-end gap-2">
        <select class="form-select w-auto" id="langSelector" onchange="switchLanguage()">
            <option value="mr">मराठी (Marathi)</option>
            <option value="en">English</option>
        </select>
        <button class="btn btn-dark" onclick="window.print()">Print Form</button>
    </div>

    <div class="form-container">
        <div class="header-wrapper">
            <img src="{% static 'images/sangamner.jpg' %}" alt="College Logo" class="college-logo">
            <h5 id="college-name">संगमनेर नगरपालिका कला, दा.ज.मालपाणी वाणिज्य आणि ब.ना.सारडा विज्ञान महाविद्यालय, संगमनेर</h5>
            <div class="form-title" id="form-title">सभागृह / हॉल नोंदणी अर्ज (Hall Booking Form)</div>
        </div>

        <form id="bookingForm" method="POST" onsubmit="handleFormSubmit(event)">
            {% csrf_token %}
            
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="fw-bold lbl-date">दिनांक:</label>
                    <input type="date" name="date" id="dateInput" class="modern-input" required onchange="updateDay()">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold lbl-day">वार:</label>
                    <select name="day" id="daySelect" class="modern-input">
                        </select>
                </div>
                <div class="col-md-4">
                    <label class="fw-bold lbl-time">वेळ:</label>
                    <div class="d-flex align-items-center gap-2">
                        <input type="time" name="time_from" id="time_from" class="modern-input" required>
                        <span class="lbl-to">ते</span>
                        <input type="time" name="time_to" id="time_to" class="modern-input" required>
                    </div>
                </div>

                <div class="col-12">
                    <label class="fw-bold lbl-event">कार्यक्रमाचे नांव:</label>
                    <input type="text" name="event_name" class="modern-input" required>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-dept">विभाग:</label>
                    <input type="text" name="department" class="modern-input">
                </div>
                <div class="col-md-6">
                    <label class="fw-bold lbl-mob">मोबाईल नंबर:</label>
                    <input type="tel" name="mobile" class="modern-input">
                </div>

                <div class="col-12">
                    <label class="fw-bold lbl-coord">कार्यक्रम प्रमुख / समन्वयक नांव :</label>
                    <input type="text" name="coordinator" class="modern-input">
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-venue">कार्यक्रम आवश्यक स्थळ:</label>
                    <select name="venue" id="venueSelect" class="modern-input">
                        </select>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-stage">स्टेज आकार:</label>
                    <select name="stage_size" id="stageSelect" class="modern-input">
                        </select>
                </div>

                <div class="col-md-6">
                    <label class="fw-bold lbl-audience">कार्यक्रमास प्रेक्षक संख्या:</label>
                    <input type="number" name="audience_count" class="modern-input">
                </div>
                <div class="col-md-6">
                    <label class="fw-bold lbl-chairs">स्टेज खुर्ची संख्या -</label>
                    <div class="input-group">
                        <select name="chair_type" id="chairType" class="modern-input" style="width: 50%;">
                            <option value="Wheel" id="optWheel">व्हील (Wheel)</option>
                            <option value="Fiber" id="optFiber">फायबर (Fiber)</option>
                        </select>
                        <input type="number" name="chairs_count" id="chairCount" class="modern-input" style="width: 50%;" placeholder="संख्या">
                    </div>
                </div>
            </div>

            <div class="section-header lbl-req">साहित्य आणि सुविधा</div>
            
            <div class="row g-3">
                <div class="col-md-3">
                    <label class="fw-bold lbl-mic">माईक:</label>
                    <input type="number" name="mic_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-ls">लाउड स्पीकर:</label>
                    <input type="number" name="speaker_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-proj">LCD प्रोजेक्टर:</label>
                    <input type="number" name="projector_count" class="modern-input" value="0">
                </div>
                <div class="col-md-3">
                    <label class="fw-bold lbl-lap">लॅपटॉप:</label>
                    <input type="number" name="laptop_count" class="modern-input" value="0">
                </div>
            </div>

            <div class="checkbox-grid mt-3">
                <div class="form-check"><input type="checkbox" name="agarbatti" class="form-check-input"> <span class="lbl-agar">अगरबत्ती</span></div>
                <div class="form-check"><input type="checkbox" name="matchbox" class="form-check-input"> <span class="lbl-match">काडीपेटी</span></div>
                <div class="form-check"><input type="checkbox" name="oil" class="form-check-input"> <span class="lbl-oil">तेल</span></div>
                <div class="form-check"><input type="checkbox" name="wati" class="form-check-input"> <span class="lbl-wati">वाती</span></div>
                <div class="form-check"><input type="checkbox" name="kapur" class="form-check-input"> <span class="lbl-kapur">कापूरवडी</span></div>
                <div class="form-check"><input type="checkbox" name="satarangi" class="form-check-input"> <span class="lbl-satarangi">सतरंजी</span></div>
                <div class="form-check"><input type="checkbox" name="carpet" class="form-check-input"> <span class="lbl-carpet">रेड कारपेट</span></div>
                <div class="form-check"><input type="checkbox" name="mandap" class="form-check-input"> <span class="lbl-mandap">मंडप</span></div>
                <div class="form-check"><input type="checkbox" name="saraswati" class="form-check-input"> <span class="lbl-saraswati">सरस्वती प्रतिमा</span></div>
                <div class="form-check"><input type="checkbox" name="samai" class="form-check-input"> <span class="lbl-samai">समाई</span></div>
            </div>

            <div class="note-box" id="note-text"></div>

            <div class="row text-center sig-box">
                <div class="col-6">
                    <p>__________________________</p>
                    <strong class="lbl-sig2">मुख्य कार्यकारी अधिकारी</strong>
                </div>
                <div class="col-6">
                    <p>__________________________</p>
                    <strong class="lbl-sig3">प्राचार्य</strong>
                </div>
            </div>

            <div class="text-center mt-4 no-print">
                <button type="submit" class="btn btn-primary btn-lg px-5 shadow">Submit Application</button>
            </div>
        </form>
    </div>

    <script>
        const translations = {
            mr: {
                college: "संगमनेर नगरपालिका कला, दा.ज.मालपाणी वाणिज्य आणि ब.ना.सारडा विज्ञान महाविद्यालय, संगमनेर",
                title: "सभागृह / हॉल नोंदणी अर्ज (Hall Booking Form)",
                date: "दिनांक:", day: "वार:", time: "वेळ:", to: "ते",
                event: "कार्यक्रमाचे नांव:", dept: "विभाग:", mob: "मोबाईल नंबर:",
                coord: "कार्यक्रम प्रमुख / समन्वयक नांव :", venue: "कार्यक्रम आवश्यक स्थळ:",
                stage: "स्टेज आकार:", chairs: "स्टेज खुर्ची संख्या -", audience: "कार्यक्रमास प्रेक्षक संख्या:",
                chair_placeholder: "संख्या",
                days: ["रविवार", "सोमवार", "मंगळवार", "बुधवार", "गुरुवार", "शुक्रवार", "शनिवार"],
                venues: ["-- स्थळ निवडा --", "साई बाबा हॉल", "नवीन सेमिनार हॉल"],
                stages: ["-- आकार निवडा --", "मोठा", "छोटा"],
                opt_wheel: "व्हील", opt_fiber: "फायबर",
                req: "साहित्य आणि सुविधा", mic: "माईक:", ls: "लाउड स्पीकर:", proj: "LCD प्रोजेक्टर:", lap: "लॅपटॉप:",
                sig2: "मुख्य कार्यकारी अधिकारी", sig3: "प्राचार्य",
                success_title: "यशस्वी!", success_msg: "तुमचा अर्ज यशस्वीरित्या सादर केला गेला आहे.",
                note: "<strong>सूचना -</strong> कार्यक्रमासाठी आवश्यक असणाऱ्या सर्व बाबींची पूर्तता करण्यासाठी समन्वयक यांनी कार्यक्रमाच्या एक दिवस अगोदर पूर्वसूचना द्याव्यात. सुट्टीच्या दिवशी सभागृह उपलब्ध करण्याची जबाबदारी संबंधित विभागाची राहील. प्रथम आलेल्या अर्जास प्राधान्य दिले जाईल. कार्यक्रमासाठी लागणाऱ्या सर्व बाबींचे नियोजन व व्यवस्थापन करण्याची सर्वस्वी जबाबदारी कार्यक्रम प्रमुखाची राहील. <strong>सभागृहातील साहित्याच्या नुकसानीस समन्वयक जबाबदार राहतील.</strong>",
                agar: "अगरबत्ती", match: "काडीपेटी", oil: "तेल", wati: "वाती", kapur: "कापूरवडी", 
                satarangi: "सतरंजी", carpet: "रेड कारपेट", mandap: "मंडप", saraswati: "सरस्वती प्रतिमा", samai: "समाई"
            },
            en: {
                college: "Sangamner Municipal Arts, D.J. Malpani Commerce and B.N. Sarda Science College, Sangamner",
                title: "Hall Booking Form",
                date: "Date:", day: "Day:", time: "Time:", to: "To",
                event: "Event Name:", dept: "Department:", mob: "Mobile No:",
                coord: "Program Head / Coordinator Name:", venue: "Venue Required:",
                stage: "Stage Size:", chairs: "Stage Chairs Count -", audience: "Estimated Participants:",
                chair_placeholder: "Count",
                days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                venues: ["-- Select Venue --", "Sai Baba Hall", "New Seminar Hall"],
                stages: ["-- Select Size --", "Large", "Small"],
                opt_wheel: "Wheel", opt_fiber: "Fiber",
                req: "Materials & Facilities", mic: "Mic:", ls: "Loud Speaker:", proj: "LCD Projector:", lap: "Laptop:",
                sig2: "Chief Executive Officer", sig3: "Principal",
                success_title: "Submitted!", success_msg: "Your application has been submitted successfully.",
                note: "<strong>Note -</strong> To fulfill requirements, the coordinator should give prior notice one day before. On holidays, the responsibility of making the hall available lies with the concerned department. Priority to first come first serve. The complete responsibility of management shall lie with the Program Head. <strong>The coordinator will be responsible for damages.</strong>",
                agar: "Incense Sticks", match: "Matchbox", oil: "Oil", wati: "Cotton Wicks", kapur: "Camphor", 
                satarangi: "Satarangi/Mat", carpet: "Red Carpet", mandap: "Mandap", saraswati: "Saraswati Photo", samai: "Traditional Lamp"
            }
        };

        const engDayList = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

        function updateDay() {
            const dateVal = document.getElementById('dateInput').value;
            if (dateVal) {
                const date = new Date(dateVal);
                document.getElementById('daySelect').selectedIndex = date.getDay();
            }
        }

        function switchLanguage() {
            const lang = document.getElementById('langSelector').value;
            const t = translations[lang];
            
            document.getElementById('college-name').innerText = t.college;
            document.getElementById('form-title').innerText = t.title;
            document.getElementById('note-text').innerHTML = t.note;

            // Labels
            const labelMap = {
                '.lbl-date': t.date, '.lbl-day': t.day, '.lbl-time': t.time, '.lbl-to': t.to,
                '.lbl-event': t.event, '.lbl-dept': t.dept, '.lbl-mob': t.mob, '.lbl-coord': t.coord,
                '.lbl-venue': t.venue, '.lbl-stage': t.stage, '.lbl-chairs': t.chairs, 
                '.lbl-audience': t.audience, '.lbl-req': t.req, '.lbl-sig2': t.sig2, '.lbl-sig3': t.sig3,
                '.lbl-mic': t.mic, '.lbl-ls': t.ls, '.lbl-proj': t.proj, '.lbl-lap': t.lap,
                '.lbl-agar': t.agar, '.lbl-match': t.match, '.lbl-oil': t.oil, '.lbl-wati': t.wati, 
                '.lbl-kapur': t.kapur, '.lbl-satarangi': t.satarangi, '.lbl-carpet': t.carpet, 
                '.lbl-mandap': t.mandap, '.lbl-saraswati': t.saraswati, '.lbl-samai': t.samai
            };
            Object.keys(labelMap).forEach(selector => {
                const el = document.querySelector(selector);
                if(el) el.innerText = labelMap[selector];
            });

            document.getElementById('chairCount').placeholder = t.chair_placeholder;
            document.getElementById('optWheel').innerText = t.opt_wheel;
            document.getElementById('optFiber').innerText = t.opt_fiber;

            // Day Select
            const daySelect = document.getElementById('daySelect');
            const dIdx = daySelect.selectedIndex !== -1 ? daySelect.selectedIndex : 0;
            daySelect.innerHTML = "";
            t.days.forEach((d, i) => {
                daySelect.add(new Option(d, engDayList[i]));
            });
            daySelect.selectedIndex = dIdx;

            // Venue Select
            const venueSelect = document.getElementById('venueSelect');
            const vIdx = venueSelect.selectedIndex !== -1 ? venueSelect.selectedIndex : 0;
            venueSelect.innerHTML = "";
            t.venues.forEach((v, i) => {
                const opt = new Option(v, i === 0 ? "" : v);
                if(i===0) opt.disabled = true;
                venueSelect.add(opt);
            });
            venueSelect.selectedIndex = vIdx;

            // Stage Select
            const stageSelect = document.getElementById('stageSelect');
            const sIdx = stageSelect.selectedIndex !== -1 ? stageSelect.selectedIndex : 0;
            stageSelect.innerHTML = "";
            t.stages.forEach((s, i) => {
                const opt = new Option(s, i === 0 ? "" : s);
                if(i===0) opt.disabled = true;
                stageSelect.add(opt);
            });
            stageSelect.selectedIndex = sIdx;
        }

        function handleFormSubmit(event) {
            event.preventDefault(); 
            const lang = document.getElementById('langSelector').value;
            const t = translations[lang];

            const from = document.getElementById('time_from').value;
            const to = document.getElementById('time_to').value;
            if (to <= from) {
                Swal.fire({
                    icon: 'error',
                    title: lang === 'mr' ? 'चूक!' : 'Error',
                    text: lang === 'mr' ? 'वेळ बरोबर तपासा!' : 'End time must be after start time!'
                });
                return false;
            }

            Swal.fire({
                title: t.success_title,
                text: t.success_msg,
                icon: 'success',
                confirmButtonColor: '#2563eb'
            }).then((result) => {
                if (result.isConfirmed) {
                    document.getElementById('bookingForm').reset();
                    switchLanguage(); 
                }
            });
        }

        window.onload = switchLanguage;
    </script>
</body>
</html>